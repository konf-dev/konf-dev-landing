<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>konf.dev Architecture</title>
<meta name="description" content="Concise engineering overview of konf.dev components, flows, security, and runtime architecture.">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="logo-crop.png">
<style>
:root{--bg:#ffffff;--bg-soft:#f8f9fb;--text:#0f1720;--muted:#6b7280;--border:#e6e9ee;--accent:#0f1720;--container:1000px}
*{box-sizing:border-box}body{margin:0;font-family:'Inter',system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;color:var(--text);background:var(--bg);line-height:1.5;-webkit-font-smoothing:antialiased}
.wrap{max-width:var(--container);margin:0 auto;padding:0 1.25rem 3rem}
header{padding:1.75rem 0 1rem;border-bottom:1px solid var(--border)}
header a{text-decoration:none;color:inherit;display:inline-flex;align-items:center;gap:.75rem;font-weight:600}
header img{height:54px;width:auto;display:block}
main h1{font-size:1.9rem;margin:1.4rem 0 .75rem}
h2{font-size:1.05rem;margin:2.25rem 0 .75rem}
p{max-width:74ch}
.lead{color:var(--muted);margin-top:0}
.code{display:inline-block;padding:.25rem .5rem;background:#fff;border:1px solid var(--border);border-radius:6px;font-family:ui-monospace,monospace;font-size:.8rem}
.diagram-container{background:var(--bg-soft);border:1px solid var(--border);padding:1rem;border-radius:12px;margin-top:1rem;overflow:auto}
.meta{font-size:.75rem;color:var(--muted);margin-top:2rem}
ul{padding-left:1.1rem}
.badge{display:inline-block;background:#fff;border:1px solid var(--border);padding:.25rem .55rem;border-radius:999px;font-size:.7rem;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;font-weight:500}
.grid{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));margin-top:.75rem}
.card{background:var(--bg-soft);border:1px solid var(--border);padding:1rem;border-radius:10px}
.card h3{margin:.15rem 0 .4rem;font-size:.95rem}
.note{background:#fff;border:1px solid var(--border);padding:.75rem .85rem;border-radius:8px;font-size:.85rem;color:var(--muted)}
.back{font-size:.85rem;margin-top:.5rem;display:inline-block;color:var(--muted)}
footer{border-top:1px solid var(--border);padding:1rem 0;text-align:center;color:var(--muted);font-size:.8rem}
@media (max-width:720px){main h1{font-size:1.55rem}}
</style>
</head>
<body>
<header class="wrap">
  <a href="index.html"><img src="logo.png" alt="konf.dev logo"> <span>Back to site</span></a>
</header>
<main class="wrap">
  <h1>Architecture overview</h1>
  <p class="lead">A concise view of the architecture that powers konf.dev — modular, observable, memory-aware, and adapter-driven.</p>

  <div class="diagram-container" aria-label="Architecture diagram" role="img">
    <svg viewBox="0 0 900 420" width="100%" height="auto" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#eef2ff"/><stop offset="1" stop-color="#f8fbff"/></linearGradient>
        <linearGradient id="g2" x1="0" x2="1"><stop offset="0" stop-color="#fff7ed"/><stop offset="1" stop-color="#fffbf5"/></linearGradient>
        <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%"><feDropShadow dx="0" dy="6" stdDeviation="8" flood-color="#000" flood-opacity="0.06"/></filter>
        <marker id="arrow" markerWidth="10" markerHeight="10" refX="8" refY="5" orient="auto"><path d="M0 0 L10 5 L0 10 z" fill="#94a3b8"/></marker>
      </defs>
      <rect x="20" y="20" width="220" height="120" rx="10" fill="url(#g1)" stroke="#e6e9ee"/>
      <text x="30" y="48" font-size="14" font-weight="700" fill="#0f1720">Browser UI</text>
      <text x="30" y="68" font-size="12" fill="#6b7280">Visual builder • Authoring • Demo</text>
      <rect x="310" y="20" width="260" height="120" rx="10" fill="#fff" stroke="#e6e9ee" filter="url(#shadow)"/>
      <text x="330" y="48" font-size="14" font-weight="700">Sutra (Runtime)</text>
      <text x="330" y="68" font-size="12" fill="#6b7280">Compiler • Executor • Tracing</text>
      <text x="330" y="112" font-size="11" fill="#6b7280">Deterministic routing • Retries • Spans</text>
      <rect x="610" y="20" width="260" height="120" rx="10" fill="url(#g2)" stroke="#e6e9ee"/>
      <text x="630" y="48" font-size="14" font-weight="700">Smrti (Memory)</text>
      <text x="630" y="68" font-size="12" fill="#6b7280">STM • Vectors • Episodic</text>
      <text x="630" y="112" font-size="11" fill="#6b7280">Provenance • TTL • Hybrid retrieval</text>
      <rect x="20" y="170" width="850" height="120" rx="10" fill="#fff" stroke="#e6e9ee"/>
      <text x="30" y="196" font-size="14" font-weight="700">Adapters &amp; Integrations (Astra)</text>
      <text x="30" y="216" font-size="12" fill="#6b7280">Third-party APIs • Connectors • MCP</text>
      <text x="50" y="300" font-size="11" fill="#6b7280">Providers • Datastores • Webhooks • Secrets</text>
      <path d="M240 80 L310 80" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)"/>
      <path d="M570 80 L610 80" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)"/>
      <path d="M460 140 L460 170" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)"/>
      <path d="M200 140 L200 170" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)"/>
    </svg>
  </div>

  <h2>Core pillars</h2>
  <div class="grid">
    <div class="card"><h3>Sutra (execution)</h3><p>Declarative workflow compiler & runtime delivering deterministic routing, retries, and rich traces.</p></div>
    <div class="card"><h3>Smrti (memory)</h3><p>Multi-tier memory (working, vector, episodic) with provenance, lifecycle controls, and cost-aware context shaping.</p></div>
    <div class="card"><h3>Astra (adapters)</h3><p>Adapter registry exposing tools, providers, and MCP endpoints through typed, testable contracts.</p></div>
  </div>

  <h2>Key flows</h2>
  <ol>
    <li><strong>Author</strong>: Visual flow created (versioned artifact).</li>
    <li><strong>Compile</strong>: Sutra builds an executable graph with typed nodes.</li>
    <li><strong>Execute</strong>: Graph runs with traces + spans; memory consulted.</li>
    <li><strong>Persist</strong>: Smrti stores vectors & episodic records with provenance.</li>
    <li><strong>Integrate</strong>: Astra adapters call external services safely.</li>
  </ol>

  <h2>Security & reliability</h2>
  <div class="grid">
    <div class="card"><h3>Sandboxed templating</h3><p>Strict Jinja environment prevents arbitrary code execution.</p></div>
    <div class="card"><h3>Typed tool contracts</h3><p>Protocol-driven definitions restrict inputs/outputs and enforce validation.</p></div>
    <div class="card"><h3>Isolation</h3><p>Executors remain stateless; storage & secrets externalized for tenancy safety.</p></div>
    <div class="card"><h3>Observability</h3><p>Per-run spans, token accounting, latency metrics, and provenance trails.</p></div>
  </div>

  <p class="meta">Updated: 2025-10-03 · Contact <a href="mailto:contact@konf.dev">contact@konf.dev</a> for partner access & deeper diagrams.</p>
</main>
<footer>
  <div class="wrap">&copy; <span id="year">2025</span> konf.dev · All rights reserved</div>
</footer>
<script>try{document.getElementById('year').textContent=new Date().getFullYear()}catch(e){}</script>
</body>
</html>
